{% extends 'login_base.html' %}
{% load static %}
{% block  content %}

<div class="my-login-page">
	<section class="h-100">
		<section class="h-100">
			<div class="container h-100">
				<div class="row justify-content-md-center h-100">
					<div class="card-wrapper">
						<div class="brand">
							<img src="{% static 'images/l-3.png'%}"  class="nav-pic" alt="">
						</div>
						<div dir="rtl" class="card fat forms">
							<div class="card-body">
								<h4 class="card-title"> تغيير كلمة  المرور </h4>
								<form id="myform" method="POST" class="my-login-validation" novalidate="" onsubmit="event.preventDefault()">
									{% csrf_token %}

                                    <div class="form-group">
										<label for="email">كلمة السر القديمة</label>
										<div class="input-group" id="show_hide_password">
										  <input  class="form-control position-relative" type="password" name="old-password" required>
										  <div class="invalid-feedback invalid-p">
											يرجى إدخال كلمة السر!
										</div>
										  <div class="input-group-addon position-absolute">
											<a href="#"><i class="fa fa-eye-slash" aria-hidden="true"></i></a>
										  </div>
										</div>
									  </div>

                                      <div class="form-group text-center invalid-p-eroro">
										{%if messages%}
										{%for masseg in messages%}
										<label  for="error"> {{masseg}} </label>
										{%endfor%}
										{%endif%}
									</div>



                                        <div class="form-group">
										<label for="email">كلمة السر الجديدة</label>
										<div class="input-group" id="show_hide_password">
										  <input id="password" class="form-control position-relative" type="password" name="password" required>
										  <div class="invalid-feedback invalid-p">
											يرجى إدخال كلمة السر!
										</div>
										  <div class="input-group-addon position-absolute">
											<a href="#"><i class="fa fa-eye-slash" aria-hidden="true"></i></a>
										  </div>
										</div>
									  </div>

									  <div class="form-group">
										<label for="password">إعادة كلمة السر
										</label>
										<div class="input-group" id="show_hide_password">
										  <input id="confirmPassword" class="form-control position-relative " type="password" required>
										  <div id="invalid-div" class="invalid-feedback invalid-p ">
											كلمة السر غير متطابقة!
										</div>
										  <div class="input-group-addon position-absolute">
											<a href="#"><i class="fa fa-eye-slash" aria-hidden="true"></i></a>
										  </div>
										</div>
									  </div>
									
	
									<div class="form-group m-0">
										<button type="submit" class="btn btn-primary mt-2" onclick="checkValid()">
											استعادة
										</button>
									</div>
								</form>
							</div>
						</div>
						<div class="footer">
							Copyright &copy; 2023 &mdash; 
						</div>
					</div>
				</div>
			</div>
		</section>
</div>
<script src="{%static 'js/jquery-3.6.1.min.js'%}" ></script>
<script type="text/javascript">
	function checkValid(){
		var password = document.getElementById("password").value;  
		var confirmPassword = document.getElementById("confirmPassword").value; 
		var element = document.getElementById("invalid-div");
		if(password != confirmPassword){	
              element.classList.add("non-valid");
		}else{
			element.classList.remove("non-valid");
			document.getElementById('myform').submit();
		}
	}

	$(document).ready(function() {
		$("#show_hide_password a").on('click', function(event) {
			event.preventDefault();
			if($('#show_hide_password input').attr("type") == "text"){
				$('#show_hide_password input').attr('type', 'password');
				$('#show_hide_password svg').addClass( "fa-eye-slash" );
				$('#show_hide_password svg').removeClass( "fa-eye" );
			}else if($('#show_hide_password input').attr("type") == "password"){
				$('#show_hide_password input').attr('type', 'text');
				$('#show_hide_password svg').removeClass( "fa-eye-slash" );
				$('#show_hide_password svg').addClass( "fa-eye" );
			}
		});
	});

	
</script>
{% endblock %}